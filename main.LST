C51 COMPILER V9.01   MAIN                                                                  01/07/2019 11:19:49 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: E:\workspace\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg52.h>
   2          #include "12864.h"
   3          #include "key.h"
   4          
   5          uchar code table1[]="1.密码开锁";
   6          uchar code table2[]="2.指纹开锁";
   7          uchar code table3[]="3.蓝牙开锁";
   8          uchar code table4[]="4.设置";
   9          uchar code table5[]="5.确定";
  10          uchar code table6[]="10.delete";
  11          uchar code table7[]="11确认";
  12          uchar code table8[]="12退出";
  13          
  14          uchar code table11[]="请输入用户密码";
  15          uchar code table21[]="请输入用户指纹";
  16          uchar code table31[]="请连接蓝牙设备";
  17          uchar code table41[]="    设置界面  ";
  18          uchar code table00[]="                  ";
  19          
  20          uchar  index=0;
  21          uchar mima[6]={0};                //密码
  22          uchar mima_edit[6]={0};   //用户输入的密码
  23          
  24          uchar flag_function=0;
  25          uchar flag_mimakaisuo=0;
  26          uchar flag_zhiwenkaisuo=0;
  27          uchar flag_lanyakaisuo=0;
  28          uchar flag_shezhijiemian=0;
  29          void init();
  30          
  31          void main()
  32          {
  33   1         init();//初始化，读取密码
  34   1      //   display_init_lcd();//显示初始界面
  35   1      //   /*
  36   1      //     1 密码解锁
  37   1      //       2 蓝牙解锁
  38   1      //       3 指纹解锁
  39   1      //       4 设置
  40   1      //   */
  41   1      //   key_num=get_keynum();
  42   1      //      lcd12864_show_string(0,1,table1);
  43   1      //      lcd12864_show_string(1,1,table2);
  44   1      //      lcd12864_show_string(2,1,table3);
  45   1      //      lcd12864_show_string(3,1,table4);
  46   1      //      lcd12864_show_string(3,5,table5);
  47   1      //
  48   1              
  49   1              while(1)
  50   1              {
  51   2                       KeyDown();
  52   2      
  53   2                       //一级菜单
  54   2                       if(flag_mimakaisuo==0&&flag_zhiwenkaisuo==0&&flag_lanyakaisuo==0&&flag_shezhijiemian==0)
  55   2                       {
C51 COMPILER V9.01   MAIN                                                                  01/07/2019 11:19:49 PAGE 2   

  56   3                       if(KeyValue==0)
  57   3                       {
  58   4                              flag_function=1;
  59   4                              lcd12864_show_char(0,0,'*');
  60   4                              lcd12864_show_char(1,0,' ');
  61   4                              lcd12864_show_char(2,0,' ');
  62   4                              lcd12864_show_char(3,0,' ');
  63   4                              lcd12864_show_char(3,4,' ');
  64   4                                                      
  65   4                       }      
  66   3      
  67   3                        if(KeyValue==1)
  68   3                       {
  69   4                              flag_function=2;
  70   4                              lcd12864_show_char(0,0,' ');
  71   4                              lcd12864_show_char(1,0,'*') ;
  72   4                              lcd12864_show_char(2,0,' ');
  73   4                              lcd12864_show_char(3,0,' ');
  74   4                              lcd12864_show_char(3,4,' ');
  75   4                                                      
  76   4                      
  77   4                       }      
  78   3      
  79   3                        if(KeyValue==2)
  80   3                       {
  81   4                              flag_function=3;
  82   4                              lcd12864_show_char(0,0,' ');
  83   4                              lcd12864_show_char(1,0,' ') ;
  84   4                              lcd12864_show_char(2,0,'*');
  85   4                              lcd12864_show_char(3,0,' ');
  86   4                              lcd12864_show_char(3,4,' ');
  87   4              
  88   4                       }      
  89   3      
  90   3                        if(KeyValue==3)
  91   3                       {
  92   4                              flag_function=4;
  93   4                              lcd12864_show_char(0,0,' ');
  94   4                              lcd12864_show_char(1,0,' ');
  95   4                              lcd12864_show_char(2,0,' ');
  96   4                              lcd12864_show_char(3,0,'*');
  97   4                              lcd12864_show_char(3,4,' ');
  98   4      
  99   4                       }
 100   3                              
 101   3      
 102   3                        if( KeyValue==4 && flag_function==1 )
 103   3                       {
 104   4                         
 105   4                              flag_mimakaisuo=1;
 106   4                   lcd12864_show_string(0,0,table11);
 107   4                   lcd12864_show_string(1,0,table00);
 108   4                   lcd12864_show_string(2,1,table6);
 109   4               lcd12864_show_string(3,1,table7);
 110   4                       lcd12864_show_string(3,5,table8);
 111   4           
 112   4                      }       
 113   3      
 114   3                        if( KeyValue==4 && flag_function==2 )
 115   3                       {
 116   4                         
 117   4                          //lcd12864_init();
C51 COMPILER V9.01   MAIN                                                                  01/07/2019 11:19:49 PAGE 3   

 118   4                              flag_zhiwenkaisuo=1;
 119   4                   //   lcd12864_show_string(0,0,table21);
 120   4                    //  lcd12864_show_string(1,0,table00);
 121   4                    //  lcd12864_show_string(2,0,table00);
 122   4                //  lcd12864_show_string(3,0,table00);
 123   4           
 124   4                      }       
 125   3      
 126   3                        if( KeyValue==4 && flag_function==3 )
 127   3                       {
 128   4                         
 129   4                          //lcd12864_init();
 130   4                              flag_lanyakaisuo=1;
 131   4                      lcd12864_show_string(0,0,table31);
 132   4                      lcd12864_show_string(1,0,table00);
 133   4                      lcd12864_show_string(2,0,table00);
 134   4                  lcd12864_show_string(3,0,table00);
 135   4           
 136   4                      }       
 137   3      
 138   3                        if( KeyValue==4 && flag_function==4 )
 139   3                       {
 140   4                         
 141   4                          //lcd12864_init();
 142   4                              flag_shezhijiemian=1;
 143   4                      lcd12864_show_string(0,0,table41);
 144   4                      lcd12864_show_string(1,0,table00);
 145   4                      lcd12864_show_string(2,0,table00);
 146   4                  lcd12864_show_string(3,0,table00);
 147   4           
 148   4                      }
 149   3                         KeyValue=17;
 150   3              }
 151   2      
 152   2                //二级菜单 ――――密码开锁界面
 153   2                 if(flag_mimakaisuo==1)
 154   2                 {
 155   3                    if(KeyValue!=17)
 156   3                        {              
 157   4                                        if(KeyValue<10)
 158   4                                        {
 159   5                                            if(index<6)
 160   5                                                {
 161   6                                                         mima_edit[index++]=KeyValue;
 162   6                                                lcd12864_show_char(1,index,KeyValue+'0');
 163   6                                                KeyValue=17;
 164   6                                                }else
 165   5                                                {
 166   6                                                //已经输入六个数了，无需再输入
 167   6                                                }
 168   5                                              
 169   5                                        }else
 170   4                                        {
 171   5                                          if(KeyValue==10)
 172   5                                              {
 173   6                                                 //删除一位
 174   6                                              }else if(KeyValue==11)
 175   5                                              {
 176   6                                               //确认
 177   6                                              }
 178   5                                              else if(KeyValue==12)
 179   5                                              {
C51 COMPILER V9.01   MAIN                                                                  01/07/2019 11:19:49 PAGE 4   

 180   6                                                //退出
 181   6                                              }else
 182   5                                              {
 183   6                                                //此种按键码无效
 184   6                                              }
 185   5                                        }
 186   4      
 187   4                               
 188   4                        }
 189   3                       
 190   3      
 191   3                 }
 192   2      
 193   2                      //二级菜单 ――――指纹开锁界面
 194   2                 if(flag_zhiwenkaisuo==1)
 195   2                 {
 196   3                 
 197   3                 }
 198   2      
 199   2                      //二级菜单 ――――蓝牙开锁界面
 200   2                 if(flag_lanyakaisuo==1)
 201   2                 {
 202   3                 
 203   3                 }
 204   2      
 205   2                      //二级菜单 ――――蓝牙开锁界面
 206   2                 if(flag_shezhijiemian==1)
 207   2                 {
 208   3                 
 209   3                 }
 210   2      
 211   2      
 212   2                      
 213   2              //       if()
 214   2      
 215   2      
 216   2      //              if(key_num==1)
 217   2      //              {  
 218   2      //                      mimajiesuo();//密码解锁,可取消
 219   2      //              }
 220   2      //              if(key_num==2)
 221   2      //              {
 222   2      //                      lanyajiesuo();//蓝牙解锁，可取消
 223   2      //              }
 224   2      //              if(key_num==3)
 225   2      //              {  
 226   2      //                      zhiwenjiesuo();//指纹解锁，可取消
 227   2      //              }
 228   2      //              if(key_num==4)
 229   2      //              {   
 230   2      //                      shezhi();          // 设置，可取消
 231   2      //              }
 232   2              }
 233   1      }
 234          
 235          void init()
 236          {
 237   1          lcd12864_init();
 238   1              lcd12864_show_string(0,1,table1);
 239   1              lcd12864_show_string(1,1,table2);
 240   1              lcd12864_show_string(2,1,table3);
 241   1              lcd12864_show_string(3,1,table4);
C51 COMPILER V9.01   MAIN                                                                  01/07/2019 11:19:49 PAGE 5   

 242   1              lcd12864_show_string(3,5,table5);
 243   1              mima[0]=1;
 244   1              mima[1]=2;
 245   1              mima[2]=3;
 246   1              mima[3]=4;
 247   1              mima[4]=5;
 248   1              mima[5]=6;
 249   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    609    ----
   CONSTANT SIZE    =    150    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     18    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
